<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School-Tracker (Local Edition)</title>
    <style>
        body { font-family: sans-serif; background: #0b0b0b; color: #eee; margin: 0; overflow-x: hidden; }
        
        /* Leaderboard ganz oben - f√§ngt die ESP-Lines oben ab */
        #leaderboard-top { 
            position: fixed; top: 0; left: 0; width: 100%; 
            background: rgba(0, 212, 255, 0.2); border-bottom: 2px solid #00d4ff;
            display: flex; justify-content: center; gap: 20px; padding: 12px 0;
            font-size: 0.9em; z-index: 1000; backdrop-filter: blur(10px);
        }

        .main-content { margin-top: 120px; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .card { background: #1a1a1a; padding: 25px; border-radius: 15px; width: 100%; max-width: 350px; border: 1px solid #333; box-shadow: 0 10px 30px rgba(0,0,0,0.7); }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #222; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #00d4ff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #000; transition: 0.3s; }
        button:hover { background: #00b8e6; }
        .hidden { display: none; }
        .info { font-size: 0.8em; color: #888; text-align: center; margin-top: 10px; }
    </style>
</head>
<body>

<div id="leaderboard-top">
    <span id="lb-text">üèÜ Noch keine Meldungen heute</span>
</div>

<div class="main-content">
    <div id="auth-ui" class="card">
        <h2 style="margin-top:0; color:#00d4ff">üîë Login</h2>
        <p style="font-size:0.9em">Gib einen Namen und das Passwort ein.</p>
        <input type="text" id="username" placeholder="Dein Name">
        <input type="password" id="pw" placeholder="Passwort (Schule123)">
        <button onclick="simpleLogin()">Einloggen</button>
        <p class="info">Passwort ist: <b>Schule123</b></p>
    </div>

    <div id="app-ui" class="card hidden">
        <h2 style="margin-top:0">Willkommen, <span id="user-display" style="color:#00d4ff"></span></h2>
        <input type="text" id="subj" placeholder="Fach (z.B. Mathe)">
        <input type="number" id="num" placeholder="Anzahl Meldungen">
        <button onclick="addEntry()">Eintragen & Leaderboard updaten</button>
        <button onclick="location.reload()" style="background:#333; margin-top:15px; color: white; font-size:0.8em">Logout</button>
    </div>
</div>

<script>
    let entries = JSON.parse(localStorage.getItem('myStats')) || [];

    function simpleLogin() {
        const user = document.getElementById('username').value;
        const pass = document.getElementById('pw').value;

        if(user && pass === "Schule123") {
            document.getElementById('auth-ui').classList.add('hidden');
            document.getElementById('app-ui').classList.remove('hidden');
            document.getElementById('user-display').innerText = user;
            updateLB();
        } else {
            alert("Falsches Passwort oder Name leer!");
        }
    }

    function addEntry() {
        const s = document.getElementById('subj').value;
        const n = parseInt(document.getElementById('num').value);
        const name = document.getElementById('user-display').innerText;

        if(!s || isNaN(n)) return;

        entries.push({ name: name, fach: s, anzahl: n });
        localStorage.setItem('myStats', JSON.stringify(entries));
        
        document.getElementById('num').value = "";
        updateLB();
    }

    function updateLB() {
        if(entries.length === 0) return;
        
        // Sortieren nach Anzahl
        const sorted = [...entries].sort((a, b) => b.anzahl - a.anzahl).slice(0, 3);
        const lb = document.getElementById('lb-text');
        
        lb.innerHTML = sorted.map(e => `‚≠ê <b>${e.name}</b>: ${e.anzahl} (${e.fach})`).join(" | ");
    }
</script>

</body>
</html>
